%ul.nav.nav-tabs
  %li.active
    %a(href="#common" data-toggle="tab") Common
  %li
    %a(href="#images" data-toggle="tab") Images
  %li
    %a(href="#seo" data-toggle="tab") SEO

= simple_form_for [:admin, @product], html: {class: 'form-horizontal' }, wrapper: :bootstrap do |f|
  .tab-content
    .tab-pane.active(id="common")
      = f.input :name
      = f.input :description, as: :ckeditor, input_html: {ckeditor: {toolbar: [{name: 'Edit', items: ['Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo' ]}, {name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ], items: [ 'Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript', '-', 'RemoveFormat' ]} ]}}
      = f.input :price
      = f.input :sku
      = f.input :count
      = f.input :enabled
      = f.association :categories

      = f.association :linked_categories
      / = f.association :linked_products

      %label.select.optional.col-sm-3.control-label
        Связанные товары
      .col-sm-9
        %ul.list-group.linked_products
          - @product.linked_products.each do |linked|
            %li.list-group-item
              = linked.name
              &nbsp;
              %a.remove_linked_product.btn.btn-danger.btn-xs{id: linked.id, href: "#"}
                Remove
              %input{type: "hidden", name: "product[linked_product_ids][]", value: linked.id}
          %li.list-group-item
            .btn-group
              %button.btn.btn-default.btn-xs.dropdown-toggle{"data-toggle" => "dropdown", type: "button"}
                Добавить связанный товар
                %span.glyphicon.glyphicon-plus
              %ul.dropdown-menu{role: "menu"}
                %li
                  %a
                    .input-group
                      %span.input-group-addon
                        %span.glyphicon.glyphicon-search
                      %input.form-control{type: "text"}
                %li.divider

    .tab-pane(id="images")
      = f.simple_fields_for :images do |image|
        = render 'image_fields', :f => image
      = link_to_add_association 'add image', f, :images

    .tab-pane(id="seo")
      = render partial: 'seo', locals: {f: f}

  = f.button :submit
  = link_to 'Cancel', admin_products_path, class: 'btn btn-default'