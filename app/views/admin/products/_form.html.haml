%ul.nav.nav-tabs
  %li.active
    %a(href="#common" data-toggle="tab") Общее
  -if Settings.enable_variants
    %li
      %a(href="#variants" data-toggle="tab") Варианты
  %li
    %a(href="#attrs" data-toggle="tab") Атрибуты
  %li
    %a(href="#seo" data-toggle="tab") SEO

= simple_form_for [:admin, @product], html: { class: 'form-horizontal' } do |f|
  .tab-content
    .tab-pane.active#common
      = f.input :name
      = f.input :sku
      / = f.input :price
      / = f.input :count
      = f.input :enabled



      -if !Settings.disable_categories
        = f.association :categories
        = f.association :linked_categories
      = f.association :linked_products

      #images.clearfix.form-group
        = f.label :images, class: 'col-sm-3 control-label'
        .col-sm-9
          %ul#image_list.sortable
            = f.simple_fields_for :images do |image|
              = render 'image_fields', :f => image
            = link_to_add_association raw('<div class="img-thumbnail"><span class="glyphicon glyphicon-plus add_photo"/></div>'), f, :images, {:'data-association-insertion-node'=> 'this'} 

      = f.input :description, as: :ckeditor
      -# %label.optional.control-label.col-sm-3
      -#   Описание
      -# .label_clear
      -#   = f.input_field :description, as: :ckeditor
      / , input_html: {ckeditor: {toolbar: [{name: 'Edit', items: ['Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo' ]}, {name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ], items: [ 'Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript', '-', 'RemoveFormat' ]}, {name: 'Other', items:['Source', 'Image', 'Table']} ]}}

      -# .variants
    -if Settings.enable_variants
      .tab-pane#variants
        %table.table.variants.pull-left
          %tr
            %td Имя
            %td Артикул
            %td Цена
            %td Количество
            %td Наличие
            %td Вкл.
            %td Действия
          -#f.object.variants.build unless f.object.variants.first
          = f.fields_for :variants do |variant|
            = render 'variant_fields', :f => variant
        = link_to_add_association 'Добавить вариант', f, :variants, class: "btn btn-success btn-xs", "data-association-insertion-node" => ".variants", "data-association-insertion-method" => "append"

    .tab-pane#attrs
      %table.table.attrs.pull-left
        %tr
          %td Имя
          %td Значение
          %td Действие
        = f.fields_for :attrs do |attr|
          = render 'attr_fields', :f => attr
      = link_to_add_association 'Добавить атрибут', f, :attrs, class: "btn btn-success btn-xs", "data-association-insertion-node" => ".attrs", "data-association-insertion-method" => "append"

    .tab-pane#seo
      = render partial: 'seo', locals: {f: f}

  = f.button :submit
  = link_to 'Cancel', admin_products_path, class: 'btn btn-default'